// Base URL and token variables
@baseUrl = http://localhost:3000
@token = {{token}}

// Health Check
GET {{baseUrl}}/api/health
{
  "success": true,
  "data": {
    "database": "connected",
    "timestamp": "2025-09-23T04:00:42.999Z"
  },
  "message": "ok"
}

// Auth - Register
POST {{baseUrl}}/api/auth/register
Content-Type: application/json

{
  "email": "test{{timestamp}}@example.com",
  "password": "Password123!"
}

{
  "success": true,
  "data": {
    "userId": "cmfw13xwc0000tomsvaaihi2m",
    "onboarded": false,
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjbWZ3MTN4d2MwMDAwdG9tc3ZhYWloaTJtIiwiaWF0IjoxNzU4NjAwMTI3LCJleHAiOjE3NTkyMDQ5Mjd9.PMuddm2AOtK8aQkvv_LbnSHjBtiQNs8sd0jUVaz2YCk"
  },
  "message": "User registered successfully. Please complete onboarding."
}

// Auth - Login
POST {{baseUrl}}/api/auth/login
Content-Type: application/json

{
  "email": "test@example.com",
  "password": "Password123!"
}

{
  "success": true,
  "data": {
    "userId": "cmfw13xwc0000tomsvaaihi2m",
    "onboarded": false,
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjbWZ3MTN4d2MwMDAwdG9tc3ZhYWloaTJtIiwiaWF0IjoxNzU4NjAwMTU3LCJleHAiOjE3NTkyMDQ5NTd9.6XXmu6vwWS80EdFB10bm-kGM0WBUoGC7QLjHa8xTxjo"
  },
  "message": "Please complete your onboarding."
}

// Auth - Select Member
POST {{baseUrl}}/api/auth/select-member
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "userId": "<user-id>",
  "memberId": "<member-id>"
}

// Members - Onboard initial member
POST {{baseUrl}}/api/members/onboard
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "name": "Primary Admin",
  "role": "Admin",
  "type": "Admin"
}

{
  "success": true,
  "data": {
    "member": {
      "memberId": "5d3fec6b-629d-4a4d-bce7-d2e4e9b00468",
      "name": "Primary Admin",
      "role": "Admin",
      "type": "Admin",
      "createdAt": "2025-09-23T04:04:17.254Z"
    },
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjbWZ3MTN4d2MwMDAwdG9tc3ZhYWloaTJtIiwibWVtYmVySWQiOiI1ZDNmZWM2Yi02MjlkLTRhNGQtYmNlNy1kMmU0ZTliMDA0NjgiLCJtZW1iZXJUeXBlIjoiQWRtaW4iLCJpYXQiOjE3NTg2MDAyNTgsImV4cCI6MTc1OTIwNTA1OH0.CRRWRMt4Q8bPYm0lB_l6zgTmbVZT8Ci-J6J57Sot3-U",
    "onboarded": true
  },
  "message": "Member profile created successfully. Onboarding complete."
}

// Members - Create member (Admin only)
POST {{baseUrl}}/api/members
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "name": "Teammate 1",
  "role": "QA",
  "type": "Member"
}

{
  "success": true,
  "data": {
    "member": {
      "memberId": "4b666832-123b-4470-92fe-a6490054121b",
      "name": "Teammate 1",
      "role": "QA",
      "type": "Member",
      "createdAt": "2025-09-23T04:05:26.547Z"
    }
  },
  "message": "Member profile created successfully"
}

// Members - List
GET {{baseUrl}}/api/members
Authorization: Bearer {{token}}

{
  "success": true,
  "data": {
    "members": [
      {
        "memberId": "4b666832-123b-4470-92fe-a6490054121b",
        "name": "Teammate 1",
        "role": "QA",
        "type": "Member",
        "createdAt": "2025-09-23T04:05:26.547Z",
        "updatedAt": "2025-09-23T04:05:26.547Z"
      },
      {
        "memberId": "5d3fec6b-629d-4a4d-bce7-d2e4e9b00468",
        "name": "Primary Admin",
        "role": "Admin",
        "type": "Admin",
        "createdAt": "2025-09-23T04:04:17.254Z",
        "updatedAt": "2025-09-23T04:04:17.254Z"
      }
    ],
    "count": 2
  }
}

// Members - Get by ID
GET {{baseUrl}}/api/members/<memberId>
Authorization: Bearer {{token}}

// Members - Update
PUT {{baseUrl}}/api/members/<memberId>
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "name": "Updated Name",
  "role": "Lead QA",
  "type": "Member"
}

{
  "success": true,
  "data": {
    "member": {
      "memberId": "5d3fec6b-629d-4a4d-bce7-d2e4e9b00468",
      "name": "Updated Teammate 1",
      "role": "QA Member",
      "type": "Member",
      "createdAt": "2025-09-23T04:04:17.254Z",
      "updatedAt": "2025-09-23T04:06:45.931Z"
    }
  },
  "message": "Member profile updated successfully"
}

// Members - Delete (Admin only)
DELETE {{baseUrl}}/api/members/<memberId>
Authorization: Bearer {{token}}

// Websites - Create
POST {{baseUrl}}/api/websites
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "url": "https://example.com",
  "name": "Example"
}

{
  "success": true,
  "data": {
    "id": "cmfw1atvx0006tomslqcvxfjf",
    "url": "https://example.com",
    "name": "Example",
    "createdAt": "2025-09-23T04:07:27.691Z"
  },
  "message": "Website created"
}

// Websites - List
GET {{baseUrl}}/api/websites
Authorization: Bearer {{token}}

{
  "success": true,
  "data": [
    {
      "id": "cmfw1atvx0006tomslqcvxfjf",
      "url": "https://example.com",
      "name": "Example",
      "createdAt": "2025-09-23T04:07:27.691Z",
      "latestSnapshot": null
    }
  ]
}